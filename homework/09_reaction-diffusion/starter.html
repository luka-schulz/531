<!doctype html>
<html lang='en'>
  <head>

    <style>
      body { margin:0; padding:0 }
      canvas { width:100%; height:100% }
    </style>

  </head>

  <body>
    <canvas></canvas>
  </body>

  <script>
    // Karl Sims RD tutorial: http://www.karlsims.com/rd.html
    // Video tutorial using p5.js (don't use p5.js!)
    // https://www.youtube.com/watch?v=BV9ny785UNc
    
    // calculating large grids can get expensive very quickly
    // experiment with different values to see how high you can go
    const width = 200, 
          height = 200
    
    let canvas, ctx, grid, tmp

    // setup after canvas is instantiated
    window.onload = function() {
      canvas = document.querySelector( 'canvas' )
      ctx = canvas.getContext( '2d' )
      canvas.width = width
      canvas.height = height

      requestAnimationFrame( draw )
    }

    const draw = function() {
      requestAnimationFrame( draw )
      
      ctx.fillStyle = 'black'
      ctx.fillRect( 0,0, width, height )
      
      // get a reference to all the pixels stored in our canvas
      // so that we can write them to the screen all at once instead
      // of using hundreds of calls to fillRect(), which would be
      // expensive!
      let imgd = ctx.getImageData(0, 0, width, height),
          pixels = imgd.data

      // run simulation here...

      // ... and then draw
      for( let x = 0; x < width; x++ ) {
        for( let y = 0; y < height; y++ ) {
          let pixelIndex = (y * width * 4 ) + ( x * 4 )
          
          // create a value based on some combination of a and b
          // for this particular cell... NOTE THAT THIS WILL THROW
          // AN ERROR UNTIL YOU FILL IN THE VALUE
          let amount = // XXXXXX

          pixels[ pixelIndex ]     = amount
          pixels[ pixelIndex + 1 ] = amount
          pixels[ pixelIndex + 2 ] = amount
          pixels[ pixelIndex + 3 ] = 255
        }
      }

      ctx.putImageData( imgd, 0, 0 )

      let swap = grid
      grid = temp
      temp = swap
    }
    
  </script>

</html>
